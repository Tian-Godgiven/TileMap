

画布：
1.属性：
   id：唯一识别该画布的id，在画布被创建或者被载入时赋值给画布
   class：统一为huabu类
   scale：缩放幅度，基础值为1
   name：画布名称，显示在按钮上，也是画布文件的文件名
2.组成：tile_container，tiletext_container
其中tile_container是画布的本体，也就是Tile所放置的地方
tiletext_container是tiletext存储的地方，以使得在不同的画布内，可以选中不同的tiletext
3.事件：
	(1)左键画布边缘并拖拽：扩大或缩小画布的尺寸
	(2)左键：令右侧样式栏中的“画布”移动到最顶端
	(3)右键click：弹出子菜单，内容包括：
			Ⅰ.粘贴剪切板上的内容到此处
			Ⅱ.撤销+重做
			Ⅲ.插入：包括表格，图片，链接？
			Ⅳ.（如果是嵌套画布的话）返回上一当前画布
			Ⅴ.全选 + 清空画布内容

​	(4)右键拖拽：移动画布
​	(5)滚轮：放大或缩小画布

---

磁贴：

单个磁贴：最主要的基础对象，虽然有多种形状，但是本质都是一个方形的div，形状的制作考虑使用图片+透明背景
磁贴组合：移动时视作一个整体，点击不会弹出textblock，一部分修饰操作无法起效

​	1.磁贴之间有微弱的吸引力，当拖拽起一个磁贴靠近另一个时，能够一定的吸附效果
​	2.当拖拽dot进入一个磁贴的边框时，磁贴边框会被点亮以作提示，并且会在边框上显示出数个链接点（四角各一个，边缘各两个）这些链接点能够吸引dot，使其更准确地附着在磁贴的边缘上，当然，也可以选择不附着在链接点上，而是接入磁贴内部。对于圆形磁贴，则是均匀分布地10个点位
​	3.dot与磁贴链接后，磁贴的移动会拖拽与其链接的所有的dot，另外，此时的dot所在的线条将无法被拖拽移动，其上面的点仍然可以移动。
​	4.磁贴之间可以合并，即使其形状并不相同，合并后的磁贴之间将没有边框隔阂，并且被视作为一个元素。可以通过该方法制造形状不规则的磁贴。

事件：
	(1)左键单击：聚焦该磁贴，若其内嵌套画布则在该磁贴右侧弹出《进入画布xxx》，默认情况下在该磁贴右侧弹出tile_text（在《进入画布》下方），令右侧样式栏中的”磁贴“移动到顶端
	(2)左键拖动：移动磁贴
	(3)左键双击：切换至输入模式，通过输入值切换磁贴标题
	(4)左键拖动边缘：修改磁贴大小
	(5)右键单击：弹出子菜单，内容包括：
			Ⅰ.常规磁贴修改：背景颜色，旋转角度，改变层级，改变形状，加入记忆面包
			Ⅱ.复制，剪切，删除
			Ⅲ.锁定/解锁
			Ⅳ.隐藏/显示其对应的磁贴标题
	(6)选中：画布内的套索选中的磁贴的会产生一个虚线的淡蓝色边框以标识其已经选中，若

---

线条：
1.内容：由 line_dotRight/Left，line_dotInner，line_dotMidway与 line_Inner 构成的线条，可以含有arrow（箭头元素），用户可自定义其样式和模式
	(1)line：只是一个作为承载体的对象，高度为0，线条部分由line_inner显示
		✔①移动line：所有dot都为非连接状态下，左键按住并拖动鼠标可以移动line 
		✔	若line中有一个dot为连接状态，则无法直接移动line
		✔②鼠标点击在画布中的line上时显示其中的dot，将其聚焦

​	(2)line_dotRight/Left：分布在line两端点状对象
​		✔左键按住并拖动可以移动line_dotR/L
​		✔①.将line_dotR/L移入tile边缘时，tile上会显示出连接点，将dot与连接点重叠可以使其与该tile相关联，该dot将进入连接状态，其变为亮绿色，当该tile移动时，也会带动与其绑定的dot移动，随即带动该线条移动
​		✔②.连接状态的dot从连接点上移出后，其变为浅蓝色，并解除与该tile的绑定，不再随着其移动

​	(3).line_dotInner：分布在line上任意两线段中间的点状对象
​		✔①.左键按住并拖动可以移动line_dotInner，其会将所处的线段拉伸出来，借而形成新的线段，新的线段中各有一个新的dotInner。例如，可以将一个横线段从中间向外拉伸，形成一个突出的角		
​		❌：该功能难以实现，是否制作有待考量！②.链接状态下，左键按住并拖动line上非dot的实心位置，可以将该线段沿水平或垂直方向平移（若该平移使得dotR/L移出tile该怎么办？）

​	(4).line_dotMidway：连接两个线段的点状对象，由dotInner拖拽形成，移动这个对象可以同时改变其两边线段的长度和角度
​		其本身由两部分组成，本体则是一个用于定位的点
​		①.line_dotMidway_inner：是一个圆心位于该点状对象处的.line_dot元素，颜色为*红色*，是整体的拖拽手柄，通过移动该红色dot来触发整体的移动事件
​		②.line_dotMidway_border：是一个圆形位于该点状对象处的圆形元素，颜色与线条颜色相同，直径等于线条粗度，从而平滑地将两个线段链接起来，该元素仅做修饰用途，没有功能。

​	(5).line_inner：固定在dotInner之后，是线段本身的修饰元素
​		①属性：颜色(background)，长度(width)，粗细（height)，类型（虚线？）
​		②结构：是一个方形的div对象，其左边缘的中心与dot_left的圆心绑定，绝对中心则与dot_inner的圆心绑定

​	(6).line_arrow：箭头对象，只在选则出现箭头时构建，只出现在线条两端的端点上，箭头对象的角度大小颜色随着line_inner改变，箭头对象的顶点在其所处的端点的圆心上。
​		箭头对象由外壳与内部的图片构成，构成原理参见css.txt:11.改变图标的颜色

2.用户可以通过拖动线条的两端的line_dot圆点来改变线条的方向和长度
3.用户可以通过拖动线条的两端的line_dot圆点将其链接到不同的画布内对象上，链接后，这些线条会与链接对象绑定，会随着链接对象一起移动
4.通过拖动线条中心的line_dotInner，可以改变线条的链接路径，同时也会在这个line_dotInner点和之前与其相邻的line_dot之间形成新的line_dotInner点，也可以借此形成形状
5.当line中的任意一个dot与tile相连后，关闭本line的draggable功能

---

textblock:
	由顶部的五个按钮和text内容组成

1.四个按钮在textblock的上方，当鼠标靠近上方时会滑动出来，不会占用textblock的空间
按钮的功能分别是：
	(1).脱离：产生一个独立的textblock对象，其显示的内容仍然与其脱离前所对应的tile相关，脱离后的可以自由移动或放大缩小并且不会被隐藏
	(2).固定显示：使得该textblock固定显示在其所对应的tile的指定位置旁，不会被隐藏
	(3).固定隐藏：使得该tile不会在点击时产生textblock，并且这个textblock也不会被显示
	(4).关闭：使得该textblock暂时消失，如果是脱离了textblock则会被删除(可以回溯)

2.text内容：会在此处显示tile所包含的text内容，这些内容的本质是html代码，在textblock中不提供编辑功能，需要在“磁贴内容”栏中进行tile_text的编辑

------------

集合体/选中多个对象

1.由多个画布内对象组成的整体的对象，本质上是一个包裹了这些对象的composite，内对象的移动与缩放功能将被禁用并赋予component类
2.移动：会同时移动所有的元素
3.缩放：会等比例地同时缩放其中的所有元素，不会改变元素之间的位置关系。只会缩放磁贴对象，不会影响
4.样式：样式会尽可能地用于其内部的所有对象如颜色，边框等，旋转则是由自身进行

选中磁贴进行组合
参与组合的磁贴（可以选择从组合中解除）
解除该组合
将该组合保存为模板



